{{ define "main" }}
<section class="py-16 bg-gray-50">
  <div class="container px-4 mx-auto">
    <h1 class="mb-4 text-4xl font-bold text-center text-purple-800">{{ .Title }}</h1>
    <p class="max-w-2xl mx-auto mb-8 text-lg text-center text-gray-600">
      {{ .Description }}
    </p>

    <!-- Filter Buttons -->
    <div class="filter-tabs">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="cleaning">Cleaning</button>
      <button class="filter-btn" data-filter="visuals">Visuals</button>
      <button class="filter-btn" data-filter="capstone">Capstones</button>
    </div>

    <!-- Project Grid -->
    <div class="grid w-full gap-6 px-6 sm:grid-cols-2 lg:grid-cols-3 work-grid">
      {{ range .Pages }}
        {{ $category := .Params.category | lower }}
        <div class="overflow-hidden bg-white rounded-lg shadow-md project-card" data-category="{{ $category }}">
          <a href="{{ .RelPermalink }}">
            {{ with .Params.image }}
              <img src="{{ . | relURL }}" alt="{{ $.Title }}" class="object-cover w-full h-48">
            {{ else }}
              <img src="/images/bunny-placeholder.png" alt="No image available" class="object-cover w-full h-48">
            {{ end }}
            <div class="p-4">
              <h3 class="mb-2 text-lg font-semibold text-purple-700">{{ .Title }}</h3>
              <p class="mb-4 text-gray-700">{{ .Description }}</p>
              <span class="text-purple-600 hover:underline">View case study â†’</span>
            </div>
          </a>
        </div>
      {{ end }}
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const filterBtns = document.querySelectorAll('.filter-btn');
    const projectCards = document.querySelectorAll('.project-card');

    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const filter = btn.getAttribute('data-filter');

        filterBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        projectCards.forEach(card => {
          if (filter === 'all' || card.getAttribute('data-category') === filter) {
            card.style.display = '';
          } else {
            card.style.display = 'none';
          }
        });
      });
    });
  });
</script>
{{ end }}
